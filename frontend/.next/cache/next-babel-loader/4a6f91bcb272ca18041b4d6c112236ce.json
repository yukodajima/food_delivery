{"ast":null,"code":"//以下strapiのドキュメントを参考にする\n//https://docs-v3.strapi.io/developer-docs/latest/development/plugins/users-permissions.html#jwt-configuration\nimport axios from 'axios';\nimport Cookie from 'js-cookie';\nvar API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:1337';\n\n//新しいユーザーを登録\nexport var registerUser = function registerUser(username, email, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post(\"\".concat(API_URL, \"/auth/local/register\"), {\n      username: username,\n      email: email,\n      password: password\n    }).then(function (res) {\n      console.log('res:', res);\n      Cookie.set('token', res.data.jwt, {\n        expires: 7\n      });\n      resolve(res);\n      window.location.href = '/';\n    })[\"catch\"](function (err) {\n      reject(err);\n      console.log(err);\n    });\n  });\n};\nexport var login = function login(identifier, password) {\n  return new Promise(function (resolve, reject) {\n    axios.post(\"\".concat(API_URL, \"/auth/local\"), {\n      identifier: identifier,\n      password: password\n    }).then(function (res) {\n      console.log('res:', res);\n      Cookie.set('token', res.data.jwt, {\n        expires: 7\n      });\n      resolve(res);\n      window.location.href = '/';\n    })[\"catch\"](function (err) {\n      reject(err);\n      console.log(err);\n    });\n  });\n};","map":{"version":3,"names":["axios","Cookie","API_URL","process","env","NEXT_PUBLIC_API_URL","registerUser","username","email","password","Promise","resolve","reject","post","concat","then","res","console","log","set","data","jwt","expires","window","location","href","err","login","identifier"],"sources":["/Users/kodajimayuu1/Desktop/udemy/food-delivery-udemy/frontend/lib/auth.js"],"sourcesContent":["//以下strapiのドキュメントを参考にする\n//https://docs-v3.strapi.io/developer-docs/latest/development/plugins/users-permissions.html#jwt-configuration\nimport axios from 'axios';\nimport Cookie from 'js-cookie';\n\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:1337';\n\n//新しいユーザーを登録\nexport const registerUser = (username, email, password) => {\n  return new Promise((resolve, reject) => {\n    axios\n      .post(`${API_URL}/auth/local/register`, {\n        username,\n        email,\n        password,\n      })\n      .then((res) => {\n        console.log('res:', res);\n        Cookie.set('token', res.data.jwt, { expires: 7 });\n        resolve(res);\n        window.location.href = '/';\n      })\n      .catch((err) => {\n        reject(err);\n        console.log(err);\n      });\n  });\n};\n\nexport const login = (identifier, password) => {\n  return new Promise((resolve, reject) => {\n    axios\n      .post(`${API_URL}/auth/local`, {\n        identifier,\n        password,\n      })\n      .then((res) => {\n        console.log('res:', res);\n        Cookie.set('token', res.data.jwt, { expires: 7 });\n        resolve(res);\n        window.location.href = '/';\n      })\n      .catch((err) => {\n        reject(err);\n\n        console.log(err);\n      });\n  });\n};\n"],"mappings":"AAAA;AACA;AACA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,WAAW;AAE9B,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAG,CAACC,mBAAmB,IAAI,uBAAuB;;AAE1E;AACA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,QAAQ,EAAEC,KAAK,EAAEC,QAAQ,EAAK;EACzD,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IACtCZ,KAAK,CACFa,IAAI,IAAAC,MAAA,CAAIZ,OAAO,2BAAwB;MACtCK,QAAQ,EAARA,QAAQ;MACRC,KAAK,EAALA,KAAK;MACLC,QAAQ,EAARA;IACF,CAAC,CAAC,CACDM,IAAI,CAAC,UAACC,GAAG,EAAK;MACbC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEF,GAAG,CAAC;MACxBf,MAAM,CAACkB,GAAG,CAAC,OAAO,EAAEH,GAAG,CAACI,IAAI,CAACC,GAAG,EAAE;QAAEC,OAAO,EAAE;MAAE,CAAC,CAAC;MACjDX,OAAO,CAACK,GAAG,CAAC;MACZO,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAC5B,CAAC,CAAC,SACI,CAAC,UAACC,GAAG,EAAK;MACdd,MAAM,CAACc,GAAG,CAAC;MACXT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;IAClB,CAAC,CAAC;EACN,CAAC,CAAC;AACJ,CAAC;AAED,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAKA,CAAIC,UAAU,EAAEnB,QAAQ,EAAK;EAC7C,OAAO,IAAIC,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;IACtCZ,KAAK,CACFa,IAAI,IAAAC,MAAA,CAAIZ,OAAO,kBAAe;MAC7B0B,UAAU,EAAVA,UAAU;MACVnB,QAAQ,EAARA;IACF,CAAC,CAAC,CACDM,IAAI,CAAC,UAACC,GAAG,EAAK;MACbC,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEF,GAAG,CAAC;MACxBf,MAAM,CAACkB,GAAG,CAAC,OAAO,EAAEH,GAAG,CAACI,IAAI,CAACC,GAAG,EAAE;QAAEC,OAAO,EAAE;MAAE,CAAC,CAAC;MACjDX,OAAO,CAACK,GAAG,CAAC;MACZO,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,GAAG;IAC5B,CAAC,CAAC,SACI,CAAC,UAACC,GAAG,EAAK;MACdd,MAAM,CAACc,GAAG,CAAC;MAEXT,OAAO,CAACC,GAAG,CAACQ,GAAG,CAAC;IAClB,CAAC,CAAC;EACN,CAAC,CAAC;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module"}